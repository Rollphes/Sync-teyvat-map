'use strict';function a2_0x2ead(_0x72d677,_0x400a71){const _0x4b43ba=a2_0x4b43();return a2_0x2ead=function(_0x2eada4,_0x512deb){_0x2eada4=_0x2eada4-0xdb;let _0x530325=_0x4b43ba[_0x2eada4];return _0x530325;},a2_0x2ead(_0x72d677,_0x400a71);}const a2_0x453b08=a2_0x2ead;(function(_0x1b58d0,_0x13e031){const _0x2a2622=a2_0x2ead,_0x1f4399=_0x1b58d0();while(!![]){try{const _0x3c85dd=parseInt(_0x2a2622(0x10d))/0x1+-parseInt(_0x2a2622(0x127))/0x2+parseInt(_0x2a2622(0xf4))/0x3+-parseInt(_0x2a2622(0xf7))/0x4*(parseInt(_0x2a2622(0x123))/0x5)+parseInt(_0x2a2622(0x128))/0x6+parseInt(_0x2a2622(0x10b))/0x7*(-parseInt(_0x2a2622(0x106))/0x8)+parseInt(_0x2a2622(0xf6))/0x9;if(_0x3c85dd===_0x13e031)break;else _0x1f4399['push'](_0x1f4399['shift']());}catch(_0x469cb9){_0x1f4399['push'](_0x1f4399['shift']());}}}(a2_0x4b43,0x92e4b));var __createBinding=this&&this['__createBinding']||(Object[a2_0x453b08(0xe0)]?function(_0x236a65,_0x3d6a33,_0x558e87,_0x306eed){const _0x2f0870=a2_0x453b08;if(_0x306eed===undefined)_0x306eed=_0x558e87;var _0x1c0361=Object[_0x2f0870(0x112)](_0x3d6a33,_0x558e87);(!_0x1c0361||('get'in _0x1c0361?!_0x3d6a33[_0x2f0870(0x100)]:_0x1c0361['writable']||_0x1c0361[_0x2f0870(0xee)]))&&(_0x1c0361={'enumerable':!![],'get':function(){return _0x3d6a33[_0x558e87];}}),Object[_0x2f0870(0xe8)](_0x236a65,_0x306eed,_0x1c0361);}:function(_0xec7262,_0x165e45,_0x2497b0,_0x828e78){if(_0x828e78===undefined)_0x828e78=_0x2497b0;_0xec7262[_0x828e78]=_0x165e45[_0x2497b0];}),__setModuleDefault=this&&this[a2_0x453b08(0x114)]||(Object[a2_0x453b08(0xe0)]?function(_0x254f8c,_0x29ece8){const _0x14e60d=a2_0x453b08;Object['defineProperty'](_0x254f8c,_0x14e60d(0x103),{'enumerable':!![],'value':_0x29ece8});}:function(_0x3f1f73,_0x1b8f98){const _0x51cc4d=a2_0x453b08;_0x3f1f73[_0x51cc4d(0x103)]=_0x1b8f98;}),__importStar=this&&this[a2_0x453b08(0x126)]||function(_0x442fd5){const _0x5c9c29=a2_0x453b08;if(_0x442fd5&&_0x442fd5[_0x5c9c29(0x100)])return _0x442fd5;var _0x165307={};if(_0x442fd5!=null){for(var _0x1c8b58 in _0x442fd5)if(_0x1c8b58!==_0x5c9c29(0x103)&&Object['prototype'][_0x5c9c29(0x116)][_0x5c9c29(0xf0)](_0x442fd5,_0x1c8b58))__createBinding(_0x165307,_0x442fd5,_0x1c8b58);}return __setModuleDefault(_0x165307,_0x442fd5),_0x165307;},__awaiter=this&&this[a2_0x453b08(0x10c)]||function(_0x20f11d,_0x18dc7d,_0x4835aa,_0x275fff){function _0x50d5e3(_0x94ed4c){return _0x94ed4c instanceof _0x4835aa?_0x94ed4c:new _0x4835aa(function(_0x1e1831){_0x1e1831(_0x94ed4c);});}return new(_0x4835aa||(_0x4835aa=Promise))(function(_0x1039cf,_0x530978){const _0x20a2c2=a2_0x2ead;function _0x4cbaf8(_0x3366ff){const _0x1b5de2=a2_0x2ead;try{_0x340397(_0x275fff[_0x1b5de2(0x11c)](_0x3366ff));}catch(_0x21db6e){_0x530978(_0x21db6e);}}function _0x1ed2f8(_0x6273be){const _0x2bdcb8=a2_0x2ead;try{_0x340397(_0x275fff[_0x2bdcb8(0x122)](_0x6273be));}catch(_0x530b61){_0x530978(_0x530b61);}}function _0x340397(_0x178608){const _0x533611=a2_0x2ead;_0x178608['done']?_0x1039cf(_0x178608[_0x533611(0x104)]):_0x50d5e3(_0x178608[_0x533611(0x104)])['then'](_0x4cbaf8,_0x1ed2f8);}_0x340397((_0x275fff=_0x275fff[_0x20a2c2(0x110)](_0x20f11d,_0x18dc7d||[]))['next']());});};Object['defineProperty'](exports,a2_0x453b08(0x100),{'value':!![]});function a2_0x4b43(){const _0x4e7524=['atan','rows','default','value','minDeg','89016HFuIxQ','descriptorMatchsJ','descriptorMatchsI','Point2','distance','301nZgWfs','__awaiter','24550xnkdHf','class_id','sort','apply','enkanomiya','getOwnPropertyDescriptor','abs','__setModuleDefault','push','hasOwnProperty','AKAZEDetector','toString','@u4/opencv-build','catch','data\x5c','next','norm','OPENCV_BIN_DIR','add','floor','name','throw','607010VehcfJ','parse','center=','__importStar','1488020HypUEq','4788894ezclrn','size','queryIdx','KeyPoint','ImgDescriptors.dat','imreadAsync','ImgKeyPoints.dat','split','create','readFileSync','NORM_HAMMING2','path','opencvBinDir','connection','WebSocketServer','app','defineProperty','send','imwriteAsync','cols','length','dist','configurable','detectAsync','call','mul','message','env','2097441lukUkM','@u4/opencv4nodejs','8183790xapaXI','20RSgDIB','Vec2','map','OpenCVBuildEnv','computeAsync','trainIdx','slice','utf-8','getRegion','__esModule'];a2_0x4b43=function(){return _0x4e7524;};return a2_0x4b43();}const opencvBuild=__importStar(require(a2_0x453b08(0x119))),cv=__importStar(require(a2_0x453b08(0xf5))),opencv4nodejs_1=require(a2_0x453b08(0xf5)),fs=__importStar(require('fs')),ws_1=require('ws');process[a2_0x453b08(0xf3)][a2_0x453b08(0x11e)]=new opencvBuild[(a2_0x453b08(0xfa))]()[a2_0x453b08(0xe4)],process[a2_0x453b08(0xf3)][a2_0x453b08(0xe3)]+=';'+new opencvBuild[(a2_0x453b08(0xfa))]()[a2_0x453b08(0xe4)];const homePath=__dirname[a2_0x453b08(0xdf)](a2_0x453b08(0xed))[0x0],resourcesPath=homePath[a2_0x453b08(0xdf)](a2_0x453b08(0xe7))[0x0],akaze=new opencv4nodejs_1[(a2_0x453b08(0x117))](),wss=new ws_1[(a2_0x453b08(0xe6))]({'port':0x6cfc}),dimensions={0x2:{'name':a2_0x453b08(0xf9),'x':0x1b5a,'y':0x466},0x7:{'name':a2_0x453b08(0x111),'x':0x745,'y':0x6f7},0x9:{'name':'sougan','x':0x7eb,'y':0x7a6}};let clientDimension='2';const findMap=_0x9221f9=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x2a5f93=a2_0x453b08,_0xddaf20=yield cv[_0x2a5f93(0xdd)](resourcesPath+'img\x5ct.png',cv['IMREAD_GRAYSCALE']),_0x58742a=new cv['Rect'](Math[_0x2a5f93(0x120)](_0xddaf20[_0x2a5f93(0xeb)]*0.03125),Math['floor'](_0xddaf20[_0x2a5f93(0x102)]*0.01851),Math[_0x2a5f93(0x120)](_0xddaf20[_0x2a5f93(0x102)]*0.19444),Math[_0x2a5f93(0x120)](_0xddaf20['rows']*0.19444)),_0x1dbf27=_0xddaf20[_0x2a5f93(0xff)](_0x58742a)['resize'](0x258,0x258);yield cv[_0x2a5f93(0xea)]('img\x5cout.png',_0x1dbf27);const _0x47a70c=yield akaze[_0x2a5f93(0xef)](_0x1dbf27),_0x24d996=yield akaze[_0x2a5f93(0xfb)](_0x1dbf27,_0x47a70c),_0x5774be=JSON['parse'](fs[_0x2a5f93(0xe1)](resourcesPath+(_0x2a5f93(0x11b)+_0x9221f9[_0x2a5f93(0x121)]+_0x2a5f93(0xde)),_0x2a5f93(0xfe)))['map'](_0x29f21a=>new cv[(_0x2a5f93(0xdb))](new cv[(_0x2a5f93(0x109))](_0x29f21a['pt']['x'],_0x29f21a['pt']['y']),_0x29f21a[_0x2a5f93(0x129)],_0x29f21a['angle'],_0x29f21a['response'],_0x29f21a['octave'],_0x29f21a[_0x2a5f93(0x10e)])),_0x1b923c=new cv['Mat'](JSON[_0x2a5f93(0x124)](fs[_0x2a5f93(0xe1)](resourcesPath+(_0x2a5f93(0x11b)+_0x9221f9['name']+_0x2a5f93(0xdc)),_0x2a5f93(0xfe))),0x0),_0x22a17f=new cv['BFMatcher'](cv[_0x2a5f93(0xe2)]),_0x2ca19b=_0x22a17f['match'](_0x24d996,_0x1b923c);if(_0x2ca19b[_0x2a5f93(0xec)]===0x0)return;const _0x8ed903=0x28,_0x3f54d9=_0x2ca19b[_0x2a5f93(0x10f)]((_0x175c14,_0x5da257)=>_0x175c14['distance']-_0x5da257[_0x2a5f93(0x10a)])[_0x2a5f93(0xfd)](0x0,_0x8ed903),_0x3544c3=[];for(let _0x5a4695=0x0;_0x5a4695<_0x3f54d9[_0x2a5f93(0xec)]-0x1;_0x5a4695++){const _0x221419={'minDeg':0x168,'descriptorMatchsI':_0x3f54d9[_0x5a4695]};for(let _0x3102fa=_0x5a4695+0x1;_0x3102fa<_0x3f54d9[_0x2a5f93(0xec)];_0x3102fa++){if(_0x5a4695==_0x3102fa)continue;const _0x2f26fe=Math[_0x2a5f93(0x101)]((_0x5774be[_0x3f54d9[_0x5a4695]['trainIdx']]['pt']['y']-_0x5774be[_0x3f54d9[_0x3102fa][_0x2a5f93(0xfc)]]['pt']['y'])/(_0x5774be[_0x3f54d9[_0x5a4695][_0x2a5f93(0xfc)]]['pt']['x']-_0x5774be[_0x3f54d9[_0x3102fa][_0x2a5f93(0xfc)]]['pt']['x'])),_0x54b79f=Math[_0x2a5f93(0x101)]((_0x47a70c[_0x3f54d9[_0x5a4695][_0x2a5f93(0x12a)]]['pt']['y']-_0x47a70c[_0x3f54d9[_0x3102fa][_0x2a5f93(0x12a)]]['pt']['y'])/(_0x47a70c[_0x3f54d9[_0x5a4695][_0x2a5f93(0x12a)]]['pt']['x']-_0x47a70c[_0x3f54d9[_0x3102fa][_0x2a5f93(0x12a)]]['pt']['x']));let _0x152e20=_0x2f26fe*(0xb4/Math['PI'])%0x168,_0x3d256e=_0x54b79f*(0xb4/Math['PI'])%0x168;_0x152e20=_0x152e20<0x0?0x168+_0x152e20:_0x152e20,_0x3d256e=_0x3d256e<0x0?0x168+_0x3d256e:_0x3d256e;const _0x48ed08=Math[_0x2a5f93(0x113)](_0x152e20-_0x3d256e);if(isNaN(_0x48ed08))continue;_0x221419['minDeg']>_0x48ed08&&(_0x221419['descriptorMatchsJ']=_0x3f54d9[_0x3102fa],_0x221419['minDeg']=_0x48ed08);}if(_0x221419[_0x2a5f93(0x105)]>0.1||_0x221419[_0x2a5f93(0x108)][_0x2a5f93(0x10a)]>0x32)continue;_0x3544c3[_0x2a5f93(0x115)](_0x221419[_0x2a5f93(0x108)]);if(_0x221419[_0x2a5f93(0x107)]===undefined||_0x221419[_0x2a5f93(0x107)][_0x2a5f93(0x10a)]>0x32)continue;_0x3544c3[_0x2a5f93(0x115)](_0x221419['descriptorMatchsJ']);}if(_0x3544c3[_0x2a5f93(0xec)]<0x2)return;_0x3544c3['slice'](0x0,0x2);const _0x487b85=new opencv4nodejs_1['Vec2'](_0x5774be[_0x3544c3[0x0][_0x2a5f93(0xfc)]]['pt']['x']-_0x5774be[_0x3544c3[0x1][_0x2a5f93(0xfc)]]['pt']['x'],_0x5774be[_0x3544c3[0x0][_0x2a5f93(0xfc)]]['pt']['y']-_0x5774be[_0x3544c3[0x1]['trainIdx']]['pt']['y'])[_0x2a5f93(0x11d)]()/new opencv4nodejs_1['Vec2'](_0x47a70c[_0x3544c3[0x0][_0x2a5f93(0x12a)]]['pt']['x']-_0x47a70c[_0x3544c3[0x1][_0x2a5f93(0x12a)]]['pt']['x'],_0x47a70c[_0x3544c3[0x0][_0x2a5f93(0x12a)]]['pt']['y']-_0x47a70c[_0x3544c3[0x1][_0x2a5f93(0x12a)]]['pt']['y'])[_0x2a5f93(0x11d)](),_0x102141=new opencv4nodejs_1[(_0x2a5f93(0xf8))](0x12c-_0x47a70c[_0x3544c3[0x0]['queryIdx']]['pt']['x'],0x12c-_0x47a70c[_0x3544c3[0x0][_0x2a5f93(0x12a)]]['pt']['y'])[_0x2a5f93(0xf1)](_0x487b85)[_0x2a5f93(0x11f)](new opencv4nodejs_1[(_0x2a5f93(0xf8))](_0x5774be[_0x3544c3[0x0][_0x2a5f93(0xfc)]]['pt']['x'],_0x5774be[_0x3544c3[0x0][_0x2a5f93(0xfc)]]['pt']['y'])),{x:_0x59ba5e,y:_0x5d0aa0}=_0x102141;return _0x2a5f93(0x125)+Math[_0x2a5f93(0x120)]((_0x5d0aa0-_0x9221f9['y'])*0x64)/0x64+','+Math[_0x2a5f93(0x120)]((_0x59ba5e-_0x9221f9['x'])*0x64)/0x64;}),sendClient=(_0x5f4997,_0xc1fa87)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x7d1f02=a2_0x453b08,_0x4595e3=yield findMap(_0xc1fa87)[_0x7d1f02(0x11a)](_0x5a07cb=>{});if(!_0x4595e3)return;_0x5f4997[_0x7d1f02(0xe9)](_0x4595e3);});wss['on'](a2_0x453b08(0xe5),_0x39e0d5=>{const _0x2952a7=a2_0x453b08;_0x39e0d5['on'](_0x2952a7(0xf2),_0x121232=>{const _0xdd5a76=_0x2952a7;clientDimension=_0x121232[_0xdd5a76(0x118)](),void sendClient(_0x39e0d5,dimensions[+clientDimension]);});});