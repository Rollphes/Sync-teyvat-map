'use strict';const a2_0x2cedb0=a2_0x4133;(function(_0x5d790f,_0x551c2d){const _0x228e49=a2_0x4133,_0x5bfda1=_0x5d790f();while(!![]){try{const _0x895fd2=parseInt(_0x228e49(0x12f))/0x1*(-parseInt(_0x228e49(0x139))/0x2)+parseInt(_0x228e49(0x123))/0x3*(-parseInt(_0x228e49(0x126))/0x4)+-parseInt(_0x228e49(0x146))/0x5*(parseInt(_0x228e49(0x14e))/0x6)+parseInt(_0x228e49(0x127))/0x7+-parseInt(_0x228e49(0x106))/0x8*(parseInt(_0x228e49(0x10a))/0x9)+parseInt(_0x228e49(0x147))/0xa*(parseInt(_0x228e49(0x12a))/0xb)+-parseInt(_0x228e49(0x11c))/0xc*(-parseInt(_0x228e49(0x14f))/0xd);if(_0x895fd2===_0x551c2d)break;else _0x5bfda1['push'](_0x5bfda1['shift']());}catch(_0x5c5149){_0x5bfda1['push'](_0x5bfda1['shift']());}}}(a2_0x15c9,0x26e94));function a2_0x4133(_0x274663,_0x46425c){const _0x15c92e=a2_0x15c9();return a2_0x4133=function(_0x4133ea,_0x3576ef){_0x4133ea=_0x4133ea-0x104;let _0x16afef=_0x15c92e[_0x4133ea];return _0x16afef;},a2_0x4133(_0x274663,_0x46425c);}var __createBinding=this&&this[a2_0x2cedb0(0x10e)]||(Object[a2_0x2cedb0(0x151)]?function(_0x2f04a9,_0x1a13aa,_0x3e8af6,_0x14a997){const _0x1b6a61=a2_0x2cedb0;if(_0x14a997===undefined)_0x14a997=_0x3e8af6;var _0x3dae9b=Object[_0x1b6a61(0x109)](_0x1a13aa,_0x3e8af6);(!_0x3dae9b||(_0x1b6a61(0x124)in _0x3dae9b?!_0x1a13aa[_0x1b6a61(0x144)]:_0x3dae9b['writable']||_0x3dae9b[_0x1b6a61(0x10b)]))&&(_0x3dae9b={'enumerable':!![],'get':function(){return _0x1a13aa[_0x3e8af6];}}),Object[_0x1b6a61(0x125)](_0x2f04a9,_0x14a997,_0x3dae9b);}:function(_0x3143dd,_0x2a37fd,_0x323649,_0x26b21b){if(_0x26b21b===undefined)_0x26b21b=_0x323649;_0x3143dd[_0x26b21b]=_0x2a37fd[_0x323649];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object[a2_0x2cedb0(0x151)]?function(_0x39d977,_0x5b9f2c){const _0x3d25fe=a2_0x2cedb0;Object[_0x3d25fe(0x125)](_0x39d977,_0x3d25fe(0x135),{'enumerable':!![],'value':_0x5b9f2c});}:function(_0x4b6859,_0x36c091){const _0xbb050=a2_0x2cedb0;_0x4b6859[_0xbb050(0x135)]=_0x36c091;}),__importStar=this&&this['__importStar']||function(_0x2f725c){const _0x37294b=a2_0x2cedb0;if(_0x2f725c&&_0x2f725c[_0x37294b(0x144)])return _0x2f725c;var _0x11da2a={};if(_0x2f725c!=null){for(var _0x52a658 in _0x2f725c)if(_0x52a658!==_0x37294b(0x135)&&Object[_0x37294b(0x150)][_0x37294b(0x11d)]['call'](_0x2f725c,_0x52a658))__createBinding(_0x11da2a,_0x2f725c,_0x52a658);}return __setModuleDefault(_0x11da2a,_0x2f725c),_0x11da2a;},__awaiter=this&&this[a2_0x2cedb0(0x10f)]||function(_0x143073,_0x4031ad,_0x40c81d,_0x3653b1){function _0x5c33d4(_0x6dd73e){return _0x6dd73e instanceof _0x40c81d?_0x6dd73e:new _0x40c81d(function(_0x3cca83){_0x3cca83(_0x6dd73e);});}return new(_0x40c81d||(_0x40c81d=Promise))(function(_0x43c8a,_0x2e2090){function _0x5b6f4f(_0x130dee){const _0x28cafc=a2_0x4133;try{_0xdaf072(_0x3653b1[_0x28cafc(0x143)](_0x130dee));}catch(_0x539c7e){_0x2e2090(_0x539c7e);}}function _0x325383(_0x4e981a){try{_0xdaf072(_0x3653b1['throw'](_0x4e981a));}catch(_0x30a118){_0x2e2090(_0x30a118);}}function _0xdaf072(_0x42a267){const _0x267839=a2_0x4133;_0x42a267['done']?_0x43c8a(_0x42a267[_0x267839(0x11f)]):_0x5c33d4(_0x42a267[_0x267839(0x11f)])[_0x267839(0x113)](_0x5b6f4f,_0x325383);}_0xdaf072((_0x3653b1=_0x3653b1['apply'](_0x143073,_0x4031ad||[]))['next']());});},__importDefault=this&&this[a2_0x2cedb0(0x118)]||function(_0x27fe08){const _0x29f2dd=a2_0x2cedb0;return _0x27fe08&&_0x27fe08[_0x29f2dd(0x144)]?_0x27fe08:{'default':_0x27fe08};};Object[a2_0x2cedb0(0x125)](exports,a2_0x2cedb0(0x144),{'value':!![]});const opencvBuild=__importStar(require(a2_0x2cedb0(0x114))),cv=__importStar(require('@u4/opencv4nodejs')),opencv4nodejs_1=require(a2_0x2cedb0(0x119)),fs=__importStar(require('fs')),screenshot_desktop_1=__importDefault(require('screenshot-desktop')),ws_1=require('ws');process['env'][a2_0x2cedb0(0x11e)]=new opencvBuild[(a2_0x2cedb0(0x13c))]()[a2_0x2cedb0(0x112)],process[a2_0x2cedb0(0x120)][a2_0x2cedb0(0x13d)]+=';'+new opencvBuild[(a2_0x2cedb0(0x13c))]()[a2_0x2cedb0(0x112)];const homePath=__dirname[a2_0x2cedb0(0x10d)]('dist')[0x0],resourcesPath=homePath[a2_0x2cedb0(0x10d)](a2_0x2cedb0(0x12b))[0x0],akaze=new opencv4nodejs_1[(a2_0x2cedb0(0x10c))](),wss=new ws_1[(a2_0x2cedb0(0x14b))]({'port':0x6cfc}),dimensions={0x2:{'name':'map','x':0x1ef4,'y':0x466},0x7:{'name':a2_0x2cedb0(0x133),'x':0x745,'y':0x6f7},0x9:{'name':a2_0x2cedb0(0x115),'x':0x7eb,'y':0x7a6}};let clientDimension='2';const findMap=_0x2c7b20=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x2d1ce1=a2_0x2cedb0;yield(0x0,screenshot_desktop_1[_0x2d1ce1(0x135)])({'filename':resourcesPath+_0x2d1ce1(0x14d)});const _0x20a4c0=yield cv['imreadAsync'](resourcesPath+_0x2d1ce1(0x14d),cv['IMREAD_GRAYSCALE']),_0x2d86dc=new cv[(_0x2d1ce1(0x14a))](Math[_0x2d1ce1(0x116)](_0x20a4c0[_0x2d1ce1(0x153)]*0.03125),Math['floor'](_0x20a4c0[_0x2d1ce1(0x141)]*0.01851),Math[_0x2d1ce1(0x116)](_0x20a4c0[_0x2d1ce1(0x141)]*0.19444),Math[_0x2d1ce1(0x116)](_0x20a4c0[_0x2d1ce1(0x141)]*0.19444)),_0x447c53=_0x20a4c0['getRegion'](_0x2d86dc)[_0x2d1ce1(0x136)](0x258,0x258),_0x18f519=yield akaze[_0x2d1ce1(0x148)](_0x447c53),_0x248dcc=yield akaze[_0x2d1ce1(0x11a)](_0x447c53,_0x18f519),_0x413dc9=JSON[_0x2d1ce1(0x13b)](fs[_0x2d1ce1(0x104)](resourcesPath+(_0x2d1ce1(0x108)+_0x2c7b20[_0x2d1ce1(0x107)]+_0x2d1ce1(0x149)),_0x2d1ce1(0x138)))['map'](_0x128b3a=>new cv[(_0x2d1ce1(0x134))](new cv[(_0x2d1ce1(0x12d))](_0x128b3a['pt']['x'],_0x128b3a['pt']['y']),_0x128b3a[_0x2d1ce1(0x140)],_0x128b3a['angle'],_0x128b3a[_0x2d1ce1(0x128)],_0x128b3a[_0x2d1ce1(0x12c)],_0x128b3a['class_id'])),_0x14a850=new cv[(_0x2d1ce1(0x137))](JSON['parse'](fs['readFileSync'](resourcesPath+('data\x5c'+_0x2c7b20[_0x2d1ce1(0x107)]+'ImgDescriptors.dat'),_0x2d1ce1(0x138))),0x0),_0x26abdb=new cv[(_0x2d1ce1(0x13a))](cv['NORM_HAMMING2']),_0x4ba8f5=_0x26abdb['match'](_0x248dcc,_0x14a850);if(_0x4ba8f5[_0x2d1ce1(0x121)]===0x0)return;const _0x274cd6=0x28,_0xcb306a=_0x4ba8f5['sort']((_0x56e582,_0x43bc0e)=>_0x56e582['distance']-_0x43bc0e['distance'])[_0x2d1ce1(0x12e)](0x0,_0x274cd6),_0x13fa05=[];for(let _0x50d086=0x0;_0x50d086<_0xcb306a['length']-0x1;_0x50d086++){const _0x50f920={'minDeg':0x168,'descriptorMatchsI':_0xcb306a[_0x50d086]};for(let _0x218b2b=_0x50d086+0x1;_0x218b2b<_0xcb306a[_0x2d1ce1(0x121)];_0x218b2b++){if(_0x50d086==_0x218b2b)continue;const _0x4f6bf5=Math[_0x2d1ce1(0x110)]((_0x413dc9[_0xcb306a[_0x50d086]['trainIdx']]['pt']['y']-_0x413dc9[_0xcb306a[_0x218b2b]['trainIdx']]['pt']['y'])/(_0x413dc9[_0xcb306a[_0x50d086][_0x2d1ce1(0x130)]]['pt']['x']-_0x413dc9[_0xcb306a[_0x218b2b][_0x2d1ce1(0x130)]]['pt']['x'])),_0x3cc933=Math[_0x2d1ce1(0x110)]((_0x18f519[_0xcb306a[_0x50d086][_0x2d1ce1(0x129)]]['pt']['y']-_0x18f519[_0xcb306a[_0x218b2b][_0x2d1ce1(0x129)]]['pt']['y'])/(_0x18f519[_0xcb306a[_0x50d086][_0x2d1ce1(0x129)]]['pt']['x']-_0x18f519[_0xcb306a[_0x218b2b][_0x2d1ce1(0x129)]]['pt']['x']));let _0x1242d0=_0x4f6bf5*(0xb4/Math['PI'])%0x168,_0x26f7ec=_0x3cc933*(0xb4/Math['PI'])%0x168;_0x1242d0=_0x1242d0<0x0?0x168+_0x1242d0:_0x1242d0,_0x26f7ec=_0x26f7ec<0x0?0x168+_0x26f7ec:_0x26f7ec;const _0x35cfbd=Math[_0x2d1ce1(0x142)](_0x1242d0-_0x26f7ec);if(isNaN(_0x35cfbd))continue;_0x50f920[_0x2d1ce1(0x13f)]>_0x35cfbd&&(_0x50f920[_0x2d1ce1(0x131)]=_0xcb306a[_0x218b2b],_0x50f920[_0x2d1ce1(0x13f)]=_0x35cfbd);}if(_0x50f920[_0x2d1ce1(0x13f)]>0.1||_0x50f920[_0x2d1ce1(0x117)][_0x2d1ce1(0x13e)]>0x32)continue;_0x13fa05[_0x2d1ce1(0x105)](_0x50f920[_0x2d1ce1(0x117)]);if(_0x50f920[_0x2d1ce1(0x131)]===undefined||_0x50f920['descriptorMatchsJ']['distance']>0x32)continue;_0x13fa05[_0x2d1ce1(0x105)](_0x50f920[_0x2d1ce1(0x131)]);}if(_0x13fa05['length']<0x2)return;_0x13fa05[_0x2d1ce1(0x12e)](0x0,0x2);const _0x50af71=new opencv4nodejs_1[(_0x2d1ce1(0x145))](_0x413dc9[_0x13fa05[0x0][_0x2d1ce1(0x130)]]['pt']['x']-_0x413dc9[_0x13fa05[0x1]['trainIdx']]['pt']['x'],_0x413dc9[_0x13fa05[0x0]['trainIdx']]['pt']['y']-_0x413dc9[_0x13fa05[0x1][_0x2d1ce1(0x130)]]['pt']['y'])[_0x2d1ce1(0x111)]()/new opencv4nodejs_1[(_0x2d1ce1(0x145))](_0x18f519[_0x13fa05[0x0][_0x2d1ce1(0x129)]]['pt']['x']-_0x18f519[_0x13fa05[0x1][_0x2d1ce1(0x129)]]['pt']['x'],_0x18f519[_0x13fa05[0x0][_0x2d1ce1(0x129)]]['pt']['y']-_0x18f519[_0x13fa05[0x1]['queryIdx']]['pt']['y'])[_0x2d1ce1(0x111)](),_0x416cc0=new opencv4nodejs_1[(_0x2d1ce1(0x145))](0x12c-_0x18f519[_0x13fa05[0x0][_0x2d1ce1(0x129)]]['pt']['x'],0x12c-_0x18f519[_0x13fa05[0x0][_0x2d1ce1(0x129)]]['pt']['y'])[_0x2d1ce1(0x14c)](_0x50af71)[_0x2d1ce1(0x132)](new opencv4nodejs_1[(_0x2d1ce1(0x145))](_0x413dc9[_0x13fa05[0x0][_0x2d1ce1(0x130)]]['pt']['x'],_0x413dc9[_0x13fa05[0x0][_0x2d1ce1(0x130)]]['pt']['y'])),{x:_0x32a361,y:_0x13876f}=_0x416cc0;return'center='+Math[_0x2d1ce1(0x116)]((_0x13876f-_0x2c7b20['y'])*0x64)/0x64+','+Math[_0x2d1ce1(0x116)]((_0x32a361-_0x2c7b20['x'])*0x64)/0x64;}),sendClient=(_0x8369d1,_0x1e6ec8)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x4b5b93=a2_0x2cedb0,_0x48627d=yield findMap(_0x1e6ec8)['catch'](_0x8b1134=>{});if(!_0x48627d)return;_0x8369d1[_0x4b5b93(0x152)](_0x48627d);});function a2_0x15c9(){const _0x1e5afd=['opencvBinDir','then','@u4/opencv-build','sougan','floor','descriptorMatchsI','__importDefault','@u4/opencv4nodejs','computeAsync','toString','526452KqJyZV','hasOwnProperty','OPENCV_BIN_DIR','value','env','length','connection','9519jUTWSx','get','defineProperty','308ztaEgT','1934562IcwfRW','response','queryIdx','521796dPinbM','app','octave','Point2','slice','6klNlaE','trainIdx','descriptorMatchsJ','add','enkanomiya','KeyPoint','default','resize','Mat','utf-8','1782UOiRDA','BFMatcher','parse','OpenCVBuildEnv','path','distance','minDeg','size','rows','abs','next','__esModule','Vec2','225EjZEpF','60JFtXFL','detectAsync','ImgKeyPoints.dat','Rect','WebSocketServer','mul','img\x5ct.png','37398jScKdc','52TDnBNY','prototype','create','send','cols','readFileSync','push','248NUJqmr','name','data\x5c','getOwnPropertyDescriptor','13626eiuqDz','configurable','AKAZEDetector','split','__createBinding','__awaiter','atan','norm'];a2_0x15c9=function(){return _0x1e5afd;};return a2_0x15c9();}wss['on'](a2_0x2cedb0(0x122),_0x47cceb=>{_0x47cceb['on']('message',_0x474bf4=>{const _0x3a7397=a2_0x4133;clientDimension=_0x474bf4[_0x3a7397(0x11b)](),void sendClient(_0x47cceb,dimensions[+clientDimension]);});});