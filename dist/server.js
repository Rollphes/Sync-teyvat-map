'use strict';const a2_0x2dcb83=a2_0x2e15;(function(_0x52ee65,_0x563345){const _0x536d5e=a2_0x2e15,_0x220c0b=_0x52ee65();while(!![]){try{const _0xe08b7b=parseInt(_0x536d5e(0x21c))/0x1*(-parseInt(_0x536d5e(0x213))/0x2)+parseInt(_0x536d5e(0x23d))/0x3+-parseInt(_0x536d5e(0x1f6))/0x4+-parseInt(_0x536d5e(0x21b))/0x5*(-parseInt(_0x536d5e(0x23c))/0x6)+parseInt(_0x536d5e(0x22a))/0x7*(-parseInt(_0x536d5e(0x1fe))/0x8)+-parseInt(_0x536d5e(0x238))/0x9*(parseInt(_0x536d5e(0x210))/0xa)+parseInt(_0x536d5e(0x23f))/0xb;if(_0xe08b7b===_0x563345)break;else _0x220c0b['push'](_0x220c0b['shift']());}catch(_0x46962e){_0x220c0b['push'](_0x220c0b['shift']());}}}(a2_0x4063,0x6050c));var __createBinding=this&&this[a2_0x2dcb83(0x217)]||(Object[a2_0x2dcb83(0x20d)]?function(_0x26ed46,_0x5c6142,_0x2fc914,_0x18a4b7){const _0x490972=a2_0x2dcb83;if(_0x18a4b7===undefined)_0x18a4b7=_0x2fc914;var _0x59d5a5=Object[_0x490972(0x241)](_0x5c6142,_0x2fc914);(!_0x59d5a5||(_0x490972(0x20c)in _0x59d5a5?!_0x5c6142[_0x490972(0x215)]:_0x59d5a5[_0x490972(0x235)]||_0x59d5a5[_0x490972(0x237)]))&&(_0x59d5a5={'enumerable':!![],'get':function(){return _0x5c6142[_0x2fc914];}}),Object[_0x490972(0x222)](_0x26ed46,_0x18a4b7,_0x59d5a5);}:function(_0xc77cf8,_0x41a0bc,_0x271b20,_0x477e39){if(_0x477e39===undefined)_0x477e39=_0x271b20;_0xc77cf8[_0x477e39]=_0x41a0bc[_0x271b20];}),__setModuleDefault=this&&this[a2_0x2dcb83(0x1ff)]||(Object['create']?function(_0x2bd338,_0x2a603d){const _0x2457d8=a2_0x2dcb83;Object[_0x2457d8(0x222)](_0x2bd338,_0x2457d8(0x21d),{'enumerable':!![],'value':_0x2a603d});}:function(_0x5a2dc5,_0x5d271b){const _0x4739cc=a2_0x2dcb83;_0x5a2dc5[_0x4739cc(0x21d)]=_0x5d271b;}),__importStar=this&&this[a2_0x2dcb83(0x1fb)]||function(_0x100454){const _0x1cfdba=a2_0x2dcb83;if(_0x100454&&_0x100454['__esModule'])return _0x100454;var _0x442014={};if(_0x100454!=null){for(var _0x5e9eca in _0x100454)if(_0x5e9eca!==_0x1cfdba(0x21d)&&Object[_0x1cfdba(0x225)][_0x1cfdba(0x1fd)]['call'](_0x100454,_0x5e9eca))__createBinding(_0x442014,_0x100454,_0x5e9eca);}return __setModuleDefault(_0x442014,_0x100454),_0x442014;},__awaiter=this&&this[a2_0x2dcb83(0x22b)]||function(_0x3d6699,_0x181924,_0x597bef,_0x36623a){function _0x44f3a7(_0x500e59){return _0x500e59 instanceof _0x597bef?_0x500e59:new _0x597bef(function(_0x192054){_0x192054(_0x500e59);});}return new(_0x597bef||(_0x597bef=Promise))(function(_0x443f02,_0x535567){const _0x4e0c07=a2_0x2e15;function _0x2afa4a(_0x3b9fdd){const _0x475c83=a2_0x2e15;try{_0x55f4a9(_0x36623a[_0x475c83(0x236)](_0x3b9fdd));}catch(_0x113d2e){_0x535567(_0x113d2e);}}function _0x593c44(_0x28157e){const _0x118335=a2_0x2e15;try{_0x55f4a9(_0x36623a[_0x118335(0x202)](_0x28157e));}catch(_0x323102){_0x535567(_0x323102);}}function _0x55f4a9(_0x5623e0){const _0xa474a=a2_0x2e15;_0x5623e0[_0xa474a(0x20a)]?_0x443f02(_0x5623e0[_0xa474a(0x223)]):_0x44f3a7(_0x5623e0[_0xa474a(0x223)])[_0xa474a(0x205)](_0x2afa4a,_0x593c44);}_0x55f4a9((_0x36623a=_0x36623a[_0x4e0c07(0x1f8)](_0x3d6699,_0x181924||[]))[_0x4e0c07(0x236)]());});},__importDefault=this&&this[a2_0x2dcb83(0x232)]||function(_0x1c5a0f){return _0x1c5a0f&&_0x1c5a0f['__esModule']?_0x1c5a0f:{'default':_0x1c5a0f};};function a2_0x4063(){const _0x4c112d=['toString','angle','78lDUQcB','169716KkplZg','data\x5c','18542700fzUpBW','Rect','getOwnPropertyDescriptor','BFMatcher','octave','img\x5ct.png','slice','app','ImgKeyPoints.dat','Mat','Vec2','size','center=','rows','KeyPoint','246148SZbILw','@u4/opencv4nodejs','apply','catch','readFileSync','__importStar','minDeg','hasOwnProperty','8MfQeav','__setModuleDefault','NORM_HAMMING2','trainIdx','throw','detectAsync','descriptorMatchsI','then','utf-8','distance','descriptorMatchsJ','norm','done','OpenCVBuildEnv','get','create','floor','getRegion','835980nEHozs','Point2','add','2rYEGsc','WebSocketServer','__esModule','resize','__createBinding','map','length','ImgDescriptors.dat','172165WwqUFt','448373cVSssv','default','path','class_id','parse','computeAsync','defineProperty','value','atan','prototype','opencvBinDir','IMREAD_GRAYSCALE','connection','queryIdx','3731707XGPjiA','__awaiter','match','response','split','OPENCV_BIN_DIR','send','name','__importDefault','cols','push','writable','next','configurable','81XGTInP','env'];a2_0x4063=function(){return _0x4c112d;};return a2_0x4063();}Object['defineProperty'](exports,a2_0x2dcb83(0x215),{'value':!![]});const opencvBuild=__importStar(require('@u4/opencv-build')),cv=__importStar(require(a2_0x2dcb83(0x1f7))),opencv4nodejs_1=require(a2_0x2dcb83(0x1f7)),fs=__importStar(require('fs')),screenshot_desktop_1=__importDefault(require('screenshot-desktop')),ws_1=require('ws');process[a2_0x2dcb83(0x239)][a2_0x2dcb83(0x22f)]=new opencvBuild['OpenCVBuildEnv']()[a2_0x2dcb83(0x226)],process[a2_0x2dcb83(0x239)][a2_0x2dcb83(0x21e)]+=';'+new opencvBuild[(a2_0x2dcb83(0x20b))]()[a2_0x2dcb83(0x226)];const homePath=__dirname[a2_0x2dcb83(0x22e)]('dist')[0x0],resourcesPath=homePath[a2_0x2dcb83(0x22e)](a2_0x2dcb83(0x246))[0x0],akaze=new opencv4nodejs_1['AKAZEDetector'](),wss=new ws_1[(a2_0x2dcb83(0x214))]({'port':0x6cfc}),dimensions={0x2:{'name':a2_0x2dcb83(0x218),'x':0x1b5a,'y':0x466},0x7:{'name':'enkanomiya','x':0x745,'y':0x6f7},0x9:{'name':'sougan','x':0x7eb,'y':0x7a6}};let clientDimension='2';const findMap=_0x3084ee=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x3147c3=a2_0x2dcb83;yield(0x0,screenshot_desktop_1[_0x3147c3(0x21d)])({'filename':resourcesPath+'img\x5ct.png'});const _0x395fc5=yield cv['imreadAsync'](resourcesPath+_0x3147c3(0x244),cv[_0x3147c3(0x227)]),_0x32aeb9=new cv[(_0x3147c3(0x240))](Math['floor'](_0x395fc5[_0x3147c3(0x233)]*0.03125),Math[_0x3147c3(0x20e)](_0x395fc5[_0x3147c3(0x1f4)]*0.01851),Math[_0x3147c3(0x20e)](_0x395fc5[_0x3147c3(0x1f4)]*0.19444),Math[_0x3147c3(0x20e)](_0x395fc5['rows']*0.19444)),_0x4f6b36=_0x395fc5[_0x3147c3(0x20f)](_0x32aeb9)[_0x3147c3(0x216)](0x258,0x258),_0x2541df=yield akaze[_0x3147c3(0x203)](_0x4f6b36),_0x2772fe=yield akaze[_0x3147c3(0x221)](_0x4f6b36,_0x2541df),_0x22f496=JSON[_0x3147c3(0x220)](fs['readFileSync'](resourcesPath+(_0x3147c3(0x23e)+_0x3084ee[_0x3147c3(0x231)]+_0x3147c3(0x247)),'utf-8'))[_0x3147c3(0x218)](_0x185d45=>new cv[(_0x3147c3(0x1f5))](new cv[(_0x3147c3(0x211))](_0x185d45['pt']['x'],_0x185d45['pt']['y']),_0x185d45[_0x3147c3(0x1f2)],_0x185d45[_0x3147c3(0x23b)],_0x185d45[_0x3147c3(0x22d)],_0x185d45[_0x3147c3(0x243)],_0x185d45[_0x3147c3(0x21f)])),_0x135ee8=new cv[(_0x3147c3(0x248))](JSON['parse'](fs[_0x3147c3(0x1fa)](resourcesPath+(_0x3147c3(0x23e)+_0x3084ee['name']+_0x3147c3(0x21a)),_0x3147c3(0x206))),0x0),_0xc1623e=new cv[(_0x3147c3(0x242))](cv[_0x3147c3(0x200)]),_0x5dc08f=_0xc1623e[_0x3147c3(0x22c)](_0x2772fe,_0x135ee8);if(_0x5dc08f[_0x3147c3(0x219)]===0x0)return;const _0x267dff=0x28,_0x403b64=_0x5dc08f['sort']((_0xbdba05,_0x43380a)=>_0xbdba05[_0x3147c3(0x207)]-_0x43380a[_0x3147c3(0x207)])[_0x3147c3(0x245)](0x0,_0x267dff),_0x45b6f8=[];for(let _0x437718=0x0;_0x437718<_0x403b64[_0x3147c3(0x219)]-0x1;_0x437718++){const _0x4b80f7={'minDeg':0x168,'descriptorMatchsI':_0x403b64[_0x437718]};for(let _0x13f99c=_0x437718+0x1;_0x13f99c<_0x403b64[_0x3147c3(0x219)];_0x13f99c++){if(_0x437718==_0x13f99c)continue;const _0x50795d=Math[_0x3147c3(0x224)]((_0x22f496[_0x403b64[_0x437718][_0x3147c3(0x201)]]['pt']['y']-_0x22f496[_0x403b64[_0x13f99c][_0x3147c3(0x201)]]['pt']['y'])/(_0x22f496[_0x403b64[_0x437718][_0x3147c3(0x201)]]['pt']['x']-_0x22f496[_0x403b64[_0x13f99c][_0x3147c3(0x201)]]['pt']['x'])),_0x5a9e48=Math[_0x3147c3(0x224)]((_0x2541df[_0x403b64[_0x437718][_0x3147c3(0x229)]]['pt']['y']-_0x2541df[_0x403b64[_0x13f99c][_0x3147c3(0x229)]]['pt']['y'])/(_0x2541df[_0x403b64[_0x437718][_0x3147c3(0x229)]]['pt']['x']-_0x2541df[_0x403b64[_0x13f99c]['queryIdx']]['pt']['x']));let _0xb8d021=_0x50795d*(0xb4/Math['PI'])%0x168,_0x36070a=_0x5a9e48*(0xb4/Math['PI'])%0x168;_0xb8d021=_0xb8d021<0x0?0x168+_0xb8d021:_0xb8d021,_0x36070a=_0x36070a<0x0?0x168+_0x36070a:_0x36070a;const _0x2d92cc=Math['abs'](_0xb8d021-_0x36070a);if(isNaN(_0x2d92cc))continue;_0x4b80f7[_0x3147c3(0x1fc)]>_0x2d92cc&&(_0x4b80f7[_0x3147c3(0x208)]=_0x403b64[_0x13f99c],_0x4b80f7['minDeg']=_0x2d92cc);}if(_0x4b80f7[_0x3147c3(0x1fc)]>0.1||_0x4b80f7[_0x3147c3(0x204)][_0x3147c3(0x207)]>0x32)continue;_0x45b6f8['push'](_0x4b80f7['descriptorMatchsI']);if(_0x4b80f7[_0x3147c3(0x208)]===undefined||_0x4b80f7['descriptorMatchsJ']['distance']>0x32)continue;_0x45b6f8[_0x3147c3(0x234)](_0x4b80f7[_0x3147c3(0x208)]);}if(_0x45b6f8[_0x3147c3(0x219)]<0x2)return;_0x45b6f8['slice'](0x0,0x2);const _0x1bc4e6=new opencv4nodejs_1['Vec2'](_0x22f496[_0x45b6f8[0x0][_0x3147c3(0x201)]]['pt']['x']-_0x22f496[_0x45b6f8[0x1]['trainIdx']]['pt']['x'],_0x22f496[_0x45b6f8[0x0][_0x3147c3(0x201)]]['pt']['y']-_0x22f496[_0x45b6f8[0x1][_0x3147c3(0x201)]]['pt']['y'])[_0x3147c3(0x209)]()/new opencv4nodejs_1[(_0x3147c3(0x249))](_0x2541df[_0x45b6f8[0x0]['queryIdx']]['pt']['x']-_0x2541df[_0x45b6f8[0x1]['queryIdx']]['pt']['x'],_0x2541df[_0x45b6f8[0x0][_0x3147c3(0x229)]]['pt']['y']-_0x2541df[_0x45b6f8[0x1]['queryIdx']]['pt']['y'])[_0x3147c3(0x209)](),_0x5b8a0f=new opencv4nodejs_1[(_0x3147c3(0x249))](0x12c-_0x2541df[_0x45b6f8[0x0][_0x3147c3(0x229)]]['pt']['x'],0x12c-_0x2541df[_0x45b6f8[0x0][_0x3147c3(0x229)]]['pt']['y'])['mul'](_0x1bc4e6)[_0x3147c3(0x212)](new opencv4nodejs_1['Vec2'](_0x22f496[_0x45b6f8[0x0][_0x3147c3(0x201)]]['pt']['x'],_0x22f496[_0x45b6f8[0x0][_0x3147c3(0x201)]]['pt']['y'])),{x:_0x3ba838,y:_0x18b2f9}=_0x5b8a0f;return _0x3147c3(0x1f3)+Math[_0x3147c3(0x20e)]((_0x18b2f9-_0x3084ee['y'])*0x64)/0x64+','+Math[_0x3147c3(0x20e)]((_0x3ba838-_0x3084ee['x'])*0x64)/0x64;}),sendClient=(_0x2c2262,_0x383b37)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0xcfb159=a2_0x2dcb83,_0x4ff793=yield findMap(_0x383b37)[_0xcfb159(0x1f9)](_0x74dac9=>{});if(!_0x4ff793)return;_0x2c2262[_0xcfb159(0x230)](_0x4ff793);});function a2_0x2e15(_0x584a3b,_0x5f4712){const _0x4063d1=a2_0x4063();return a2_0x2e15=function(_0x2e15b1,_0x20e4ad){_0x2e15b1=_0x2e15b1-0x1f2;let _0x389f03=_0x4063d1[_0x2e15b1];return _0x389f03;},a2_0x2e15(_0x584a3b,_0x5f4712);}wss['on'](a2_0x2dcb83(0x228),_0x3da8d5=>{_0x3da8d5['on']('message',_0x53c5ae=>{const _0x420da4=a2_0x2e15;clientDimension=_0x53c5ae[_0x420da4(0x23a)](),void sendClient(_0x3da8d5,dimensions[+clientDimension]);});});