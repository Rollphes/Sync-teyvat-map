'use strict';function a2_0x218f(_0x2ccf17,_0x20b3a3){const _0x2e43c2=a2_0x2e43();return a2_0x218f=function(_0x218f6d,_0x76e54e){_0x218f6d=_0x218f6d-0x95;let _0x3640a6=_0x2e43c2[_0x218f6d];return _0x3640a6;},a2_0x218f(_0x2ccf17,_0x20b3a3);}const a2_0x4b18f7=a2_0x218f;(function(_0x3169b6,_0x2b9aab){const _0x5ed4b4=a2_0x218f,_0x297565=_0x3169b6();while(!![]){try{const _0x58a336=parseInt(_0x5ed4b4(0xdf))/0x1+parseInt(_0x5ed4b4(0xd4))/0x2+parseInt(_0x5ed4b4(0xc2))/0x3*(-parseInt(_0x5ed4b4(0x9b))/0x4)+-parseInt(_0x5ed4b4(0x99))/0x5+parseInt(_0x5ed4b4(0xb0))/0x6+parseInt(_0x5ed4b4(0x98))/0x7+parseInt(_0x5ed4b4(0xcb))/0x8;if(_0x58a336===_0x2b9aab)break;else _0x297565['push'](_0x297565['shift']());}catch(_0x292002){_0x297565['push'](_0x297565['shift']());}}}(a2_0x2e43,0x6a04e));var __createBinding=this&&this['__createBinding']||(Object[a2_0x4b18f7(0x9c)]?function(_0x5319c1,_0x1603f4,_0x9bc0cb,_0x54a8e0){const _0xf9b3fd=a2_0x4b18f7;if(_0x54a8e0===undefined)_0x54a8e0=_0x9bc0cb;var _0xe36724=Object[_0xf9b3fd(0xe1)](_0x1603f4,_0x9bc0cb);(!_0xe36724||(_0xf9b3fd(0xd6)in _0xe36724?!_0x1603f4[_0xf9b3fd(0xe4)]:_0xe36724['writable']||_0xe36724[_0xf9b3fd(0x9d)]))&&(_0xe36724={'enumerable':!![],'get':function(){return _0x1603f4[_0x9bc0cb];}}),Object['defineProperty'](_0x5319c1,_0x54a8e0,_0xe36724);}:function(_0x18881e,_0x79ee79,_0x5e34a1,_0x13cf69){if(_0x13cf69===undefined)_0x13cf69=_0x5e34a1;_0x18881e[_0x13cf69]=_0x79ee79[_0x5e34a1];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object[a2_0x4b18f7(0x9c)]?function(_0x56d84a,_0x984f6d){const _0x14ec11=a2_0x4b18f7;Object[_0x14ec11(0xd5)](_0x56d84a,_0x14ec11(0xd7),{'enumerable':!![],'value':_0x984f6d});}:function(_0x166d9f,_0x1c4923){_0x166d9f['default']=_0x1c4923;}),__importStar=this&&this[a2_0x4b18f7(0xcd)]||function(_0x2c1492){const _0x32510b=a2_0x4b18f7;if(_0x2c1492&&_0x2c1492[_0x32510b(0xe4)])return _0x2c1492;var _0x5b1cf6={};if(_0x2c1492!=null){for(var _0x332226 in _0x2c1492)if(_0x332226!==_0x32510b(0xd7)&&Object[_0x32510b(0xd9)][_0x32510b(0xae)][_0x32510b(0xc3)](_0x2c1492,_0x332226))__createBinding(_0x5b1cf6,_0x2c1492,_0x332226);}return __setModuleDefault(_0x5b1cf6,_0x2c1492),_0x5b1cf6;},__awaiter=this&&this['__awaiter']||function(_0x113de2,_0x1242f8,_0x23c894,_0x213fc7){function _0x5a5379(_0x53a59b){return _0x53a59b instanceof _0x23c894?_0x53a59b:new _0x23c894(function(_0x1edcaa){_0x1edcaa(_0x53a59b);});}return new(_0x23c894||(_0x23c894=Promise))(function(_0x5a8b08,_0x517ba4){const _0x2415ba=a2_0x218f;function _0x4e7336(_0x5176cc){const _0x555407=a2_0x218f;try{_0x27f146(_0x213fc7[_0x555407(0xa0)](_0x5176cc));}catch(_0x360028){_0x517ba4(_0x360028);}}function _0x1d6e8b(_0xae88dd){const _0x58ebe2=a2_0x218f;try{_0x27f146(_0x213fc7[_0x58ebe2(0xb5)](_0xae88dd));}catch(_0xf76adf){_0x517ba4(_0xf76adf);}}function _0x27f146(_0x1c09c7){const _0x3276f7=a2_0x218f;_0x1c09c7[_0x3276f7(0xe3)]?_0x5a8b08(_0x1c09c7[_0x3276f7(0xa7)]):_0x5a5379(_0x1c09c7[_0x3276f7(0xa7)])['then'](_0x4e7336,_0x1d6e8b);}_0x27f146((_0x213fc7=_0x213fc7[_0x2415ba(0xbd)](_0x113de2,_0x1242f8||[]))[_0x2415ba(0xa0)]());});},__importDefault=this&&this[a2_0x4b18f7(0xa5)]||function(_0x274f41){const _0x1d2df5=a2_0x4b18f7;return _0x274f41&&_0x274f41[_0x1d2df5(0xe4)]?_0x274f41:{'default':_0x274f41};};Object[a2_0x4b18f7(0xd5)](exports,a2_0x4b18f7(0xe4),{'value':!![]});const opencvBuild=__importStar(require('@u4/opencv-build')),cv=__importStar(require(a2_0x4b18f7(0xb7))),opencv4nodejs_1=require('@u4/opencv4nodejs'),fs=__importStar(require('fs')),screenshot_desktop_1=__importDefault(require(a2_0x4b18f7(0x96))),ws_1=require('ws');process['env']['OPENCV_BIN_DIR']=new opencvBuild[(a2_0x4b18f7(0xc6))]()[a2_0x4b18f7(0xa3)],process[a2_0x4b18f7(0xb6)][a2_0x4b18f7(0xcf)]+=';'+new opencvBuild[(a2_0x4b18f7(0xc6))]()['opencvBinDir'];function a2_0x2e43(){const _0xf31103=['4NdOGCK','create','configurable','octave','AKAZEDetector','next','atan','response','opencvBinDir','NORM_HAMMING2','__importDefault','dist','value','slice','readFileSync','send','abs','minDeg','distance','hasOwnProperty','img\x5ct.png','426768ElZPhG','IMREAD_GRAYSCALE','message','data\x5c','imreadAsync','throw','env','@u4/opencv4nodejs','rows','Vec2','KeyPoint','connection','match','apply','class_id','trainIdx','name','angle','1595871KAFEER','call','sort','mul','OpenCVBuildEnv','Mat','descriptorMatchsI','parse','add','165056OYVPsw','norm','__importStar','descriptorMatchsJ','path','WebSocketServer','split','ImgKeyPoints.dat','computeAsync','1547212SRTwjk','defineProperty','get','default','queryIdx','prototype','resize','map','cols','floor','sougan','494628NXlYRI','catch','getOwnPropertyDescriptor','utf-8','done','__esModule','app','screenshot-desktop','Rect','3089065kDlCJx','4175390QooqWg','length'];a2_0x2e43=function(){return _0xf31103;};return a2_0x2e43();}const homePath=__dirname['split'](a2_0x4b18f7(0xa6))[0x0],resourcesPath=homePath[a2_0x4b18f7(0xd1)](a2_0x4b18f7(0x95))[0x0],akaze=new opencv4nodejs_1[(a2_0x4b18f7(0x9f))](),wss=new ws_1[(a2_0x4b18f7(0xd0))]({'port':0x6cfc}),dimensions={0x2:{'name':a2_0x4b18f7(0xdb),'x':0x1b5a,'y':0x466},0x7:{'name':'enkanomiya','x':0x745,'y':0x6f7},0x9:{'name':a2_0x4b18f7(0xde),'x':0x7eb,'y':0x7a6}};let clientDimension='2';const findMap=_0x1f45f2=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x12d9f3=a2_0x4b18f7;yield(0x0,screenshot_desktop_1[_0x12d9f3(0xd7)])({'filename':resourcesPath+_0x12d9f3(0xaf)});const _0x430a3b=yield cv[_0x12d9f3(0xb4)](resourcesPath+_0x12d9f3(0xaf),cv[_0x12d9f3(0xb1)]),_0x146a0c=new cv[(_0x12d9f3(0x97))](Math[_0x12d9f3(0xdd)](_0x430a3b[_0x12d9f3(0xdc)]*0.03125),Math[_0x12d9f3(0xdd)](_0x430a3b[_0x12d9f3(0xb8)]*0.01851),Math[_0x12d9f3(0xdd)](_0x430a3b[_0x12d9f3(0xb8)]*0.19444),Math[_0x12d9f3(0xdd)](_0x430a3b['rows']*0.19444)),_0x1dd43a=_0x430a3b['getRegion'](_0x146a0c)[_0x12d9f3(0xda)](0x258,0x258),_0x4a5995=yield akaze['detectAsync'](_0x1dd43a),_0x41557a=yield akaze[_0x12d9f3(0xd3)](_0x1dd43a,_0x4a5995),_0x2c345f=JSON[_0x12d9f3(0xc9)](fs[_0x12d9f3(0xa9)](resourcesPath+(_0x12d9f3(0xb3)+_0x1f45f2[_0x12d9f3(0xc0)]+_0x12d9f3(0xd2)),_0x12d9f3(0xe2)))[_0x12d9f3(0xdb)](_0x7a54c7=>new cv[(_0x12d9f3(0xba))](new cv['Point2'](_0x7a54c7['pt']['x'],_0x7a54c7['pt']['y']),_0x7a54c7['size'],_0x7a54c7[_0x12d9f3(0xc1)],_0x7a54c7[_0x12d9f3(0xa2)],_0x7a54c7[_0x12d9f3(0x9e)],_0x7a54c7[_0x12d9f3(0xbe)])),_0x35f924=new cv[(_0x12d9f3(0xc7))](JSON[_0x12d9f3(0xc9)](fs[_0x12d9f3(0xa9)](resourcesPath+(_0x12d9f3(0xb3)+_0x1f45f2['name']+'ImgDescriptors.dat'),'utf-8')),0x0),_0x12380e=new cv['BFMatcher'](cv[_0x12d9f3(0xa4)]),_0x480807=_0x12380e[_0x12d9f3(0xbc)](_0x41557a,_0x35f924);if(_0x480807['length']===0x0)return;const _0x4fea5c=0x28,_0x57b479=_0x480807[_0x12d9f3(0xc4)]((_0x52405c,_0x336bdd)=>_0x52405c[_0x12d9f3(0xad)]-_0x336bdd['distance'])[_0x12d9f3(0xa8)](0x0,_0x4fea5c),_0xf0b33f=[];for(let _0x19b277=0x0;_0x19b277<_0x57b479['length']-0x1;_0x19b277++){const _0x1cddb6={'minDeg':0x168,'descriptorMatchsI':_0x57b479[_0x19b277]};for(let _0x559bcb=_0x19b277+0x1;_0x559bcb<_0x57b479[_0x12d9f3(0x9a)];_0x559bcb++){if(_0x19b277==_0x559bcb)continue;const _0xb8f26a=Math[_0x12d9f3(0xa1)]((_0x2c345f[_0x57b479[_0x19b277][_0x12d9f3(0xbf)]]['pt']['y']-_0x2c345f[_0x57b479[_0x559bcb][_0x12d9f3(0xbf)]]['pt']['y'])/(_0x2c345f[_0x57b479[_0x19b277][_0x12d9f3(0xbf)]]['pt']['x']-_0x2c345f[_0x57b479[_0x559bcb][_0x12d9f3(0xbf)]]['pt']['x'])),_0x580962=Math['atan']((_0x4a5995[_0x57b479[_0x19b277][_0x12d9f3(0xd8)]]['pt']['y']-_0x4a5995[_0x57b479[_0x559bcb][_0x12d9f3(0xd8)]]['pt']['y'])/(_0x4a5995[_0x57b479[_0x19b277][_0x12d9f3(0xd8)]]['pt']['x']-_0x4a5995[_0x57b479[_0x559bcb][_0x12d9f3(0xd8)]]['pt']['x']));let _0x5f26af=_0xb8f26a*(0xb4/Math['PI'])%0x168,_0x10eb78=_0x580962*(0xb4/Math['PI'])%0x168;_0x5f26af=_0x5f26af<0x0?0x168+_0x5f26af:_0x5f26af,_0x10eb78=_0x10eb78<0x0?0x168+_0x10eb78:_0x10eb78;const _0x4d73fe=Math[_0x12d9f3(0xab)](_0x5f26af-_0x10eb78);if(isNaN(_0x4d73fe))continue;_0x1cddb6[_0x12d9f3(0xac)]>_0x4d73fe&&(_0x1cddb6['descriptorMatchsJ']=_0x57b479[_0x559bcb],_0x1cddb6['minDeg']=_0x4d73fe);}if(_0x1cddb6[_0x12d9f3(0xac)]>0.1||_0x1cddb6['descriptorMatchsI']['distance']>0x32)continue;_0xf0b33f['push'](_0x1cddb6[_0x12d9f3(0xc8)]);if(_0x1cddb6[_0x12d9f3(0xce)]===undefined||_0x1cddb6[_0x12d9f3(0xce)]['distance']>0x32)continue;_0xf0b33f['push'](_0x1cddb6[_0x12d9f3(0xce)]);}if(_0xf0b33f[_0x12d9f3(0x9a)]<0x2)return;_0xf0b33f['slice'](0x0,0x2);const _0x34a89a=new opencv4nodejs_1[(_0x12d9f3(0xb9))](_0x2c345f[_0xf0b33f[0x0][_0x12d9f3(0xbf)]]['pt']['x']-_0x2c345f[_0xf0b33f[0x1][_0x12d9f3(0xbf)]]['pt']['x'],_0x2c345f[_0xf0b33f[0x0][_0x12d9f3(0xbf)]]['pt']['y']-_0x2c345f[_0xf0b33f[0x1][_0x12d9f3(0xbf)]]['pt']['y'])[_0x12d9f3(0xcc)]()/new opencv4nodejs_1[(_0x12d9f3(0xb9))](_0x4a5995[_0xf0b33f[0x0][_0x12d9f3(0xd8)]]['pt']['x']-_0x4a5995[_0xf0b33f[0x1]['queryIdx']]['pt']['x'],_0x4a5995[_0xf0b33f[0x0][_0x12d9f3(0xd8)]]['pt']['y']-_0x4a5995[_0xf0b33f[0x1][_0x12d9f3(0xd8)]]['pt']['y'])[_0x12d9f3(0xcc)](),_0x49a5f0=new opencv4nodejs_1[(_0x12d9f3(0xb9))](0x12c-_0x4a5995[_0xf0b33f[0x0][_0x12d9f3(0xd8)]]['pt']['x'],0x12c-_0x4a5995[_0xf0b33f[0x0]['queryIdx']]['pt']['y'])[_0x12d9f3(0xc5)](_0x34a89a)[_0x12d9f3(0xca)](new opencv4nodejs_1[(_0x12d9f3(0xb9))](_0x2c345f[_0xf0b33f[0x0][_0x12d9f3(0xbf)]]['pt']['x'],_0x2c345f[_0xf0b33f[0x0][_0x12d9f3(0xbf)]]['pt']['y'])),{x:_0x4d9976,y:_0x5a5041}=_0x49a5f0;return'center='+Math[_0x12d9f3(0xdd)]((_0x5a5041-_0x1f45f2['y'])*0x64)/0x64+','+Math[_0x12d9f3(0xdd)]((_0x4d9976-_0x1f45f2['x'])*0x64)/0x64;}),sendClient=(_0x2e54a3,_0x5d8747)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x4bfe54=a2_0x4b18f7,_0x18173e=yield findMap(_0x5d8747)[_0x4bfe54(0xe0)](_0x417484=>{});if(!_0x18173e)return;_0x2e54a3[_0x4bfe54(0xaa)](_0x18173e);});wss['on'](a2_0x4b18f7(0xbb),_0x437dd6=>{const _0x2ea867=a2_0x4b18f7;_0x437dd6['on'](_0x2ea867(0xb2),_0x24d484=>{clientDimension=_0x24d484['toString'](),void sendClient(_0x437dd6,dimensions[+clientDimension]);});});